@media (max-width: 1023px), (max-height: 899px) {
  /* Стили для tablet-версии */

  /* Исключаем стили для страницы проектов при высоте <900px */
  body:not(.page-with-scroll) .header {
    position: fixed;
    top: 0;
    left: 0;
    pointer-events: none; /* Пропускаем события прокрутки через header */
  }

  /* Восстанавливаем pointer-events для интерактивных элементов внутри header */
  body:not(.page-with-scroll) .header-content,
  body:not(.page-with-scroll) .header-content * {
    pointer-events: auto;
  }
  
  body:not(.page-with-scroll) .footer {
    position: fixed;
    bottom: 0;
    left: 0;
    pointer-events: none; /* Пропускаем события прокрутки через footer */
  }

  /* Восстанавливаем pointer-events для интерактивных элементов внутри footer */
  body:not(.page-with-scroll) .footer-content,
  body:not(.page-with-scroll) .footer-content * {
    pointer-events: auto;
  }

  body:not(.page-with-scroll) .header.hidden {
    transform: translateY(-100%);
  }

  body:not(.page-with-scroll) .footer.hidden {
    transform: translateY(100%);
  }

  /* Стили для декоративных линий в режиме планшета */
  body:not(.page-with-scroll) .header + .decorative-line-horizontal,
  body:not(.page-with-scroll) main + .decorative-line-horizontal {
    position: fixed;
    left: 0;
    transition: transform 0.3s ease;
    pointer-events: none; /* Пропускаем события прокрутки через декоративные линии */
  }

  body:not(.page-with-scroll) .header + .decorative-line-horizontal {
    top: 64px; /* Высота хедера */
  }

  body:not(.page-with-scroll) main + .decorative-line-horizontal {
    bottom: 64px; /* Высота футера */
  }

  body:not(.page-with-scroll) .header + .decorative-line-horizontal.hidden {
    transform: translateY(-65px); /* Сдвигаем вверх, чтобы скрыть */
  }

  body:not(.page-with-scroll) main + .decorative-line-horizontal.hidden {
    transform: translateY(65px); /* Сдвигаем вниз, чтобы скрыть */
  }

  /* Исключаем стили для страницы проектов при высоте <900px */
  body:not(.page-with-scroll) .content-wrapper {
    padding-left: 0;
    padding-right: 0;
    max-width: none; /* Убираем ограничение ширины */
    width: 100vw; /* Занимаем всю ширину viewport */
    margin-left: calc(50% - 50vw); /* Растягиваем на всю ширину экрана */
    min-height: 100%; /* Минимальная высота для скролла */
    box-sizing: border-box;
  }

  /* Для главной страницы используем .page-wrapper для скролла (унификация с портфолио) */
  body:not(.page-with-scroll) .page-wrapper {
    display: block;
    height: 100vh;
    overflow-y: auto;
    overflow-x: hidden;
    padding-top: 64px;
    padding-bottom: 64px;
    box-sizing: border-box;
    /* Плавный скролл для унификации с портфолио */
    -webkit-overflow-scrolling: touch;
    scroll-behavior: auto; /* Отключаем smooth scroll для одинаковой скорости */
    /* Скрываем скроллбар */
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }

  /* Скрываем скроллбар для Webkit-браузеров (Chrome, Safari) */
  body:not(.page-with-scroll) .page-wrapper::-webkit-scrollbar {
    display: none;
  }

  .slides-container.tablet-scroll-mode {
    display: block;
    overflow: visible; /* Убираем overflow, так как скролл теперь в .page-wrapper */
    height: auto; /* Высота автоматическая */
    scroll-snap-type: none;
    box-sizing: border-box;
    width: 100%; /* Занимаем всю ширину родителя */
  }

  /* Широкий wrapper для каждого слайда - занимает всю ширину */
  .slides-container.tablet-scroll-mode .slide-wrapper {
    position: relative; /* Меняем с absolute на relative для потока документа */
    width: 100%;
    height: auto; /* Убираем фиксированную высоту */
    pointer-events: auto; /* Обрабатываем события прокрутки на всей ширине */
  }

  .slides-container.tablet-scroll-mode .slide {
    display: block;
    position: static; /* Убираем absolute позиционирование */
    opacity: 1;
    visibility: visible;
    transform: none;
    height: auto;
    min-height: auto; /* Убираем лишнюю высоту */
    width: 100%; /* Занимаем всю ширину wrapper'а */
    padding: var(--spacing-xl) 0; /* Убираем горизонтальные отступы, оставляем вертикальные */
    pointer-events: auto !important; /* Включаем клики в режиме прокрутки */
  }

  /* Центрируем контент внутри слайдов и добавляем отступы */
  .slides-container.tablet-scroll-mode .slide:first-child .main-grid,
  .slides-container.tablet-scroll-mode .project-slide-content,
  .slides-container.tablet-scroll-mode .cta-slide-content {
    padding-left: var(--spacing-lg); /* Добавляем отступы по бокам */
    padding-right: var(--spacing-lg); /* Добавляем отступы по бокам */
    max-width: var(--max-width-large); /* Ограничиваем ширину контента */
    margin-left: auto; /* Центрируем */
    margin-right: auto; /* Центрируем */
    box-sizing: border-box;
  }

  /* Скрываем дублирующиеся заголовки "Избранные работы" */
  .slides-container.tablet-scroll-mode .slide[data-slide="1"] ~ .slide .project-slide-header .section-title {
    display: none;
  }

  /* Добавляем разделители между слайдами */

  .slides-container.tablet-scroll-mode .slide-wrapper:not(:last-child)::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: min(calc(100% - 2 * var(--spacing-lg)), calc(var(--max-width-large) - 2 * var(--spacing-lg))); /* Ширина разделителя = ширина контента минус отступы */
    height: var(--line-width, 1px);
    background-color: var(--color-divider);
  }

  .footer-decorative {
    display: none;
  }

  body.page-404 .page-wrapper {
    display: block;
    height: 100vh;
    overflow-y: auto;
    padding-top: 64px;
    padding-bottom: 64px;
    box-sizing: border-box;
    -ms-overflow-style: none;  
    scrollbar-width: none;
  }

  body.page-404 .page-wrapper::-webkit-scrollbar {
    display: none;
  }

  body.page-404 .content-wrapper {
    min-height: 100%;
    box-sizing: border-box;
    display: flex;
    align-items: center;
    justify-content: center;
    padding-top: var(--spacing-xxl);
    padding-bottom: var(--spacing-xxl);
  }
}

/* Стили для страницы проектов в режиме планшета/мобильного */
/* Только по ширине, без учета высоты */
@media (max-width: 1023px) {
  body.page-with-scroll {
    overflow: hidden !important;
    height: 100vh !important;
  }

  body.page-with-scroll .page-wrapper {
    display: block;
    height: 100vh;
    overflow-y: auto;
    overflow-x: hidden;
    padding-top: 64px;
    padding-bottom: 64px;
    box-sizing: border-box;
    /* Плавный скролл для унификации с главной страницей */
    -webkit-overflow-scrolling: touch;
    scroll-behavior: auto; /* Отключаем smooth scroll для одинаковой скорости */
    -ms-overflow-style: none;  
    scrollbar-width: none;
  }

  body.page-with-scroll .page-wrapper::-webkit-scrollbar {
    display: none;
  }

  body.page-with-scroll .content-wrapper {
    min-height: calc(100vh - 128px); /* 100vh минус высота header (64px) и footer (64px) */
    box-sizing: border-box;
    display: block;
    padding-top: 0; /* Убираем лишний отступ сверху, так как page-wrapper уже имеет padding-top: 64px */
    padding-bottom: 0; /* Убираем нижний отступ, так как page-wrapper уже имеет padding-bottom: 64px, чтобы совпадало с секцией CTA */
    max-width: 100% !important; /* Убираем ограничение по ширине */
    margin: 0 !important; /* Убираем центрирование */
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  /* Фиксированное позиционирование header и footer для страницы проектов в tablet режиме */
  body.page-with-scroll .header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 64px;
    display: flex;
    align-items: center;
    flex-shrink: 0;
    z-index: 10;
    background-color: var(--color-bg-primary);
    transition: transform 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    pointer-events: none; /* Пропускаем события прокрутки через header */
  }

  /* Восстанавливаем pointer-events для интерактивных элементов внутри header */
  body.page-with-scroll .header-content,
  body.page-with-scroll .header-content * {
    pointer-events: auto;
  }

  body.page-with-scroll .header.hidden {
    transform: translateY(-100%);
  }

  body.page-with-scroll .footer {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 64px;
    display: flex;
    align-items: center;
    flex-shrink: 0;
    z-index: 10;
    background-color: var(--color-bg-primary);
    transition: transform 0.3s ease, background-color 0.3s ease, color 0.3s ease;
    pointer-events: none; /* Пропускаем события прокрутки через footer */
  }

  /* Восстанавливаем pointer-events для интерактивных элементов внутри footer */
  body.page-with-scroll .footer-content,
  body.page-with-scroll .footer-content * {
    pointer-events: auto;
  }

  body.page-with-scroll .footer.hidden {
    transform: translateY(100%);
  }

  /* Стили для декоративных линий в режиме планшета для страницы проектов */
  body.page-with-scroll .header + .decorative-line-horizontal,
  body.page-with-scroll main + .decorative-line-horizontal {
    position: fixed;
    left: 0;
    width: 100vw;
    height: var(--line-width);
    background-color: var(--line-color);
    transition: transform 0.3s ease;
    pointer-events: none; /* Пропускаем события прокрутки через декоративные линии */
    z-index: 12; /* Выше header/footer (z-index: 10) */
  }

  body.page-with-scroll .header + .decorative-line-horizontal {
    top: 64px; /* Высота хедера */
  }

  body.page-with-scroll main + .decorative-line-horizontal {
    bottom: 64px; /* Высота футера */
  }

  body.page-with-scroll .header + .decorative-line-horizontal.hidden {
    transform: translateY(-65px); /* Сдвигаем вверх, чтобы скрыть */
  }

  body.page-with-scroll main + .decorative-line-horizontal.hidden {
    transform: translateY(65px); /* Сдвигаем вниз, чтобы скрыть */
  }

  /* Стили для кнопки "Наверх" в tablet режиме */
  body.page-with-scroll .scroll-to-top {
    position: fixed;
    bottom: calc(64px + var(--spacing-md) - 8px);
    right: calc(var(--spacing-md) - 16px);
    width: 32px;
    height: 32px;
    z-index: 15; /* Выше footer (z-index: 10) и декоративных линий (z-index: 12) */
    
    > span,
    svg {
      width: 100%;
      height: 100%;
    }
    
    /* Когда футер скрыт на мобильных устройствах */
    &.footer-hidden {
      bottom: calc(var(--spacing-md) - 8px);
    }
  }
}
