const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/components-D-B5HGai.js","assets/js/components-core-DxJLR8x9.js","assets/js/utils-BGwBK1z0.js","assets/js/components-scroll-DF6W2z7Q.js","assets/js/components-svg-y7IOwReE.js","assets/js/components-background-BXvjSBPs.js"])))=>i.map(i=>d[i]);
import{N as L,M as _,e as p,f as C,P}from"./utils-BGwBK1z0.js";import{a as M,S as E}from"./components-scroll-DF6W2z7Q.js";import{L as w}from"./layout-B_i5Hhw_.js";import{T as B,L as b,C as A}from"./components-core-DxJLR8x9.js";import{L as q}from"./services-ERvBTkKF.js";const I="modulepreload",F=function(h){return"/"+h},f={},g=function(t,e,i){let o=Promise.resolve();if(e&&e.length>0){let c=function(s){return Promise.all(s.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),r=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=c(e.map(s=>{if(s=F(s),s in f)return;f[s]=!0;const d=s.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${u}`))return;const l=document.createElement("link");if(l.rel=d?"stylesheet":I,d||(l.as="script"),l.crossOrigin="",l.href=s,r&&l.setAttribute("nonce",r),document.head.appendChild(l),d)return new Promise((v,T)=>{l.addEventListener("load",v),l.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${s}`)))})}))}function a(n){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=n,window.dispatchEvent(r),!r.defaultPrevented)throw n}return o.then(n=>{for(const r of n||[])r.status==="rejected"&&a(r.reason);return t().catch(a)})};let y=!1;const m=new Map;class S{constructor(t={}){this.navigationSelector=t.navigationSelector||"",this.imageSelector=t.imageSelector||"img",this.menuButtonScrollHandler=null,this.scrollToTopButton=null,this.scrollManager=null,this._svgLoader=null,this._svgLoaderPromise=null,this.layoutManager=null,this.loadingIndicator=null}async getSvgLoader(){return this._svgLoader?this._svgLoader:this._svgLoaderPromise?this._svgLoaderPromise:(this._svgLoaderPromise=(async()=>{try{const{SvgLoader:t}=await g(async()=>{const{SvgLoader:e}=await import("./components-svg-y7IOwReE.js");return{SvgLoader:e}},[]);return this._svgLoader=new t,this._svgLoader}catch(t){throw console.error("Failed to load SvgLoader:",t),this._svgLoaderPromise=null,t}})(),this._svgLoaderPromise)}get svgLoader(){return this._svgLoader||null}initNavigation(t){t&&(L.setActiveNavigationLink(t),this.menuButtonScrollHandler=new _(t),this.menuButtonScrollHandler.init())}initScrollToTop(){this.scrollToTopButton=new M,this.scrollToTopButton.init()}initScrollManager(){const t=document.body.classList.contains("page-with-scroll"),e=document.body.classList.contains("page-404");(t||e)&&(this.scrollManager=new E(".page-wrapper",i=>{}),this.scrollManager.init(),this.scrollToTopButton&&(this.scrollToTopButton.setScrollManager(this.scrollManager),this.scrollManager.setScrollToTopButton(this.scrollToTopButton)))}ensureScrollAtTop(){(window.pageYOffset>0||document.documentElement.scrollTop>0)&&window.scrollTo(0,0);const t=document.querySelector(".page-wrapper");t&&t.scrollTop>0&&(t.scrollTop=0)}static async initGlobalComponents(){if(y)return;if(await new w().init(),new B().init(),await new b().init(),typeof window<"u"&&window.__globalCustomCursor){const a=window.__globalCustomCursor;a.isInitialized||a.init()}else{const a=new A;a.init(),typeof window<"u"&&(window.__globalCustomCursor=a)}const o=async()=>{try{const[{SvgLoader:a},{FluidBackground:n}]=await Promise.all([g(()=>import("./components-svg-y7IOwReE.js"),[]),g(()=>import("./components-D-B5HGai.js"),__vite__mapDeps([0,1,2,3,4,5])).then(s=>({FluidBackground:s.FluidBackground}))]);await new a().init();const c=new n;requestAnimationFrame(()=>{requestAnimationFrame(()=>{c.init()})})}catch(a){console.warn("Failed to load non-critical components:",a)}};window.requestIdleCallback?requestIdleCallback(o,{timeout:3e3}):setTimeout(o,100),y=!0}async loadAnimationManager(t,e=[]){return console.warn("loadAnimationManager is deprecated. Use static imports instead."),null}static updateFadeInElements(){const t=new Set,e=document.querySelector(".header-content"),i=document.querySelector(".footer-content"),o=document.querySelector(".content-wrapper"),a=document.querySelector("main"),n=document.querySelector(".slides-container");e&&t.add(e),i&&t.add(i),o&&t.add(o),a&&!t.has(a)&&t.add(a),n&&n.classList.contains("tablet-scroll-mode")&&n.querySelectorAll(".slide").forEach(c=>{c.style.opacity="1",c.style.visibility="visible"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{t.forEach(r=>{r.classList.add("fade-in-visible")})},16)})})}async initBase(){this.ensureScrollAtTop(),await S.initGlobalComponents(),this.navigationSelector&&this.initNavigation(this.navigationSelector),this.initScrollToTop(),this.initScrollManager()}getLayoutManager(){return this.layoutManager||(this.layoutManager=new w),this.layoutManager}async loadHTML(t){return this.getLayoutManager().loadHTML(t)}initLoadingIndicator(t,e){return this.loadingIndicator=new q(t,e),this.loadingIndicator.init(),this.loadingIndicator}async loadPageData(t,e={},i=null){try{return await p(t,e)}catch(o){return console.error(`Ошибка загрузки данных из ${t}:`,o),i}}async loadPageDataArray(t,e,i=[]){try{return(await p(t))[e]||i}catch(o){return console.error(`Ошибка загрузки данных из ${t}:`,o),i}}async loadPageTemplate(t,e,i=!0){if(i&&m.has(t))return m.get(t).cloneNode(!0);try{const o=await C(t,e,a=>this.loadHTML(a));return o&&i&&m.set(t,o.cloneNode(!0)),o}catch(o){return console.error(`Ошибка загрузки шаблона ${t}:`,o),null}}static clearTemplateCache(t=null){t?m.delete(t):m.clear()}createSectionWithTitle(t){const{className:e,title:i,titleClassName:o="section-title",titleTag:a="h2"}=t,n=document.createElement("div");if(n.className=e,i){const r=document.createElement(a);r.className=o,r.textContent=i,n.appendChild(r)}return n}async waitForPageReady(){return P.waitForPageReady(this.imageSelector)}async init(){await this.initBase()}}export{S as B,g as _};
