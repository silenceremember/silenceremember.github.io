const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/components-B37ec20k.js","assets/js/components-core-CO-goFmY.js","assets/js/utils-DDkmD0RB.js","assets/js/components-scroll-CzkIP5QM.js","assets/js/components-svg-D1ZYaihp.js","assets/js/components-background-BXvjSBPs.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./managers-BD3WS2NZ.js";import{N as p,M as w,e as u,f as y,P as T}from"./utils-DDkmD0RB.js";import{a as f,S}from"./components-scroll-CzkIP5QM.js";import{L as g}from"./layout-C0B9eYKg.js";import{T as L,L as v,C as _}from"./components-core-CO-goFmY.js";import{L as M}from"./services-CkGXMzVl.js";let m=!1;const l=new Map;class h{constructor(t={}){this.navigationSelector=t.navigationSelector||"",this.imageSelector=t.imageSelector||"img",this.menuButtonScrollHandler=null,this.scrollToTopButton=null,this.scrollManager=null,this._svgLoader=null,this._svgLoaderPromise=null,this.layoutManager=null,this.loadingIndicator=null}async getSvgLoader(){return this._svgLoader?this._svgLoader:this._svgLoaderPromise?this._svgLoaderPromise:(this._svgLoaderPromise=(async()=>{try{const{globalSvgLoader:t}=await c(async()=>{const{globalSvgLoader:o}=await import("./components-svg-D1ZYaihp.js");return{globalSvgLoader:o}},[]);return this._svgLoader=t,this._svgLoader}catch(t){throw console.error("Failed to load SvgLoader:",t),this._svgLoaderPromise=null,t}})(),this._svgLoaderPromise)}get svgLoader(){return this._svgLoader||null}initNavigation(t){t&&(p.setActiveNavigationLink(t),this.menuButtonScrollHandler=new w(t),this.menuButtonScrollHandler.init())}initScrollToTop(){this.scrollToTopButton=new f,this.scrollToTopButton.init()}initScrollManager(){const t=document.body.classList.contains("page-with-scroll"),o=document.body.classList.contains("page-404");(t||o)&&(this.scrollManager=new S(".page-wrapper",n=>{}),this.scrollManager.init(),this.scrollToTopButton&&(this.scrollToTopButton.setScrollManager(this.scrollManager),this.scrollManager.setScrollToTopButton(this.scrollToTopButton)))}ensureScrollAtTop(){(window.pageYOffset>0||document.documentElement.scrollTop>0)&&window.scrollTo(0,0);const t=document.querySelector(".page-wrapper");t&&t.scrollTop>0&&(t.scrollTop=0)}static async initGlobalComponents(){if(m)return;if(await new g().init(),new L().init(),await new v().init(),typeof window<"u"&&window.__globalCustomCursor){const a=window.__globalCustomCursor;a.isInitialized||a.init()}else{const a=new _;a.init(),typeof window<"u"&&(window.__globalCustomCursor=a)}const e=async()=>{try{const[{globalSvgLoader:a},{FluidBackground:r}]=await Promise.all([c(()=>import("./components-svg-D1ZYaihp.js"),[]),c(()=>import("./components-B37ec20k.js"),__vite__mapDeps([0,1,2,3,4,5])).then(s=>({FluidBackground:s.FluidBackground}))]);await a.init();const i=new r;requestAnimationFrame(()=>{i.init()})}catch(a){console.warn("Failed to load non-critical components:",a)}};window.requestIdleCallback?requestIdleCallback(e,{timeout:3e3}):setTimeout(e,100),m=!0}async loadAnimationManager(t,o=[]){return console.warn("loadAnimationManager is deprecated. Use static imports instead."),null}static updateFadeInElements(){const t=new Set,o=document.querySelector(".header-content"),n=document.querySelector(".footer-content"),e=document.querySelector(".content-wrapper"),a=document.querySelector("main"),r=document.querySelector(".slides-container"),i=document.querySelectorAll(".decorative-line-horizontal");o&&t.add(o),n&&t.add(n),e&&t.add(e),a&&!t.has(a)&&t.add(a),i.forEach(s=>{t.add(s)}),r&&r.classList.contains("tablet-scroll-mode")&&r.querySelectorAll(".slide").forEach(d=>{d.style.opacity="1",d.style.visibility="visible"}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{t.forEach(s=>{s.classList.add("fade-in-visible")})},16)})})}async initBase(){this.ensureScrollAtTop(),await h.initGlobalComponents(),this.navigationSelector&&this.initNavigation(this.navigationSelector),this.initScrollToTop(),this.initScrollManager()}getLayoutManager(){return this.layoutManager||(this.layoutManager=new g),this.layoutManager}async loadHTML(t){return this.getLayoutManager().loadHTML(t)}initLoadingIndicator(t,o){return this.loadingIndicator=new M(t,o),this.loadingIndicator.init(),this.loadingIndicator}async loadPageData(t,o={},n=null){try{return await u(t,o)}catch(e){return console.error(`Ошибка загрузки данных из ${t}:`,e),n}}async loadPageDataArray(t,o,n=[]){try{return(await u(t))[o]||n}catch(e){return console.error(`Ошибка загрузки данных из ${t}:`,e),n}}async loadPageTemplate(t,o,n=!0){if(n&&l.has(t))return l.get(t).cloneNode(!0);try{const e=await y(t,o,a=>this.loadHTML(a));return e&&n&&l.set(t,e.cloneNode(!0)),e}catch(e){return console.error(`Ошибка загрузки шаблона ${t}:`,e),null}}static clearTemplateCache(t=null){t?l.delete(t):l.clear()}createSectionWithTitle(t){const{className:o,title:n,titleClassName:e="section-title",titleTag:a="h2"}=t,r=document.createElement("div");if(r.className=o,n){const i=document.createElement(a);i.className=e,i.textContent=n,r.appendChild(i)}return r}async waitForPageReady(){return T.waitForPageReady(this.imageSelector)}async init(){await this.initBase()}}export{h as B};
