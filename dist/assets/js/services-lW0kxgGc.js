import{_ as u}from"./managers-BeWNv7uO.js";class p{constructor(t,e){this.loadingId=t,this.containerId=e,this.loadingElement=null,this.container=null}init(){this.loadingElement=document.getElementById(this.loadingId),this.container=document.getElementById(this.containerId)}hide(){return new Promise(t=>{if(this.loadingElement||this.init(),!this.loadingElement){t();return}const e=window.getComputedStyle(this.loadingElement);if(!(e.display!=="none"&&e.visibility!=="hidden"&&parseFloat(e.opacity)>.01)){this.loadingElement.parentNode&&this.loadingElement.remove(),this.container&&(this.container.style.visibility="",this.container.style.opacity=""),t();return}this.container&&this.container.contains(this.loadingElement),this.loadingElement.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",this.loadingElement.style.opacity="1",this.loadingElement.style.transform="translateY(0)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.loadingElement.style.opacity="0",this.loadingElement.style.transform="translateY(-10px)"})}),setTimeout(()=>{this.loadingElement.parentNode&&this.loadingElement.remove();const i=this.container&&(this.container.id==="projects-grid"||this.container.id==="research-publications-section"||this.container.classList.contains("projects-grid")||this.container.classList.contains("research-publications-section"));this.container&&(i?(this.container.style.visibility="",this.container.style.opacity="",this.container.style.pointerEvents="",this.container.style.display=""):(this.container.style.display="none",this.container.style.pointerEvents="none",this.container.style.visibility="hidden",this.container.style.opacity="0")),t()},300)})}show(){if(this.container||this.init(),!this.container)return;let t=document.getElementById(this.loadingId);this.container.children.length>0&&(!t||this.container.children.length>1||!this.container.contains(t))?(this.container.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",this.container.style.opacity="1",this.container.style.transform="translateY(0)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.container.style.opacity="0",this.container.style.transform="translateY(-10px)"})}),setTimeout(()=>{this.createAndShowLoading()},300)):this.createAndShowLoading()}createAndShowLoading(){let t=document.getElementById(this.loadingId);const e=t&&this.container&&this.container.contains(t);t||(t=document.createElement("div"),t.className="loading",t.id=this.loadingId,t.innerHTML=`
        <div class="loading-squares">
          <div class="loading-square"></div>
          <div class="loading-square"></div>
          <div class="loading-square"></div>
        </div>
      `),this.container&&(e||(this.container.innerHTML="",this.container.appendChild(t)),this.container.style.display="",this.container.style.pointerEvents="",this.container.style.opacity="0",this.container.style.transform="",this.container.style.visibility="visible"),t.classList.remove("hidden"),t.style.display="",t.style.opacity="0",t.style.transform="translateY(10px)",requestAnimationFrame(()=>{requestAnimationFrame(()=>{t.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",t.style.opacity="1",t.style.transform="translateY(0)",this.container&&(this.container.style.transition="opacity 0.3s ease-in-out, transform 0.3s ease-in-out",this.container.style.opacity="1",this.container.style.transform="translateY(0)",setTimeout(()=>{this.container.style.opacity="",this.container.style.transform="",this.container.style.transition=""},300))})}),this.loadingElement=t}}class y{constructor(){this.metrics={LCP:null,FID:null,CLS:null,INP:null,FCP:null,TTFB:null},this.thresholds={LCP:{good:2500,needsImprovement:4e3},FID:{good:100,needsImprovement:300},CLS:{good:.1,needsImprovement:.25},INP:{good:200,needsImprovement:500},FCP:{good:1800,needsImprovement:3e3},TTFB:{good:800,needsImprovement:1800}},this.observers=[],this.initialized=!1}async init(){if(!this.initialized)try{const{onLCP:t,onFID:e,onCLS:n,onINP:i,onFCP:r,onTTFB:a}=await u(async()=>{const{onLCP:l,onFID:c,onCLS:d,onINP:h,onFCP:g,onTTFB:m}=await import("./vendor-BzBO9tML.js");return{onLCP:l,onFID:c,onCLS:d,onINP:h,onFCP:g,onTTFB:m}},[]);t(this.handleMetric.bind(this,"LCP")),e(this.handleMetric.bind(this,"FID")),n(this.handleMetric.bind(this,"CLS")),i(this.handleMetric.bind(this,"INP")),r(this.handleMetric.bind(this,"FCP")),a(this.handleMetric.bind(this,"TTFB")),this.monitorResourceTiming(),this.monitorNavigationTiming(),this.initialized=!0,console.log("‚úÖ Performance Monitor initialized")}catch(t){console.error("‚ùå Failed to initialize Performance Monitor:",t)}}handleMetric(t,e){this.metrics[t]=e.value;const n=this.getRating(t,e.value),i=this.getRatingColor(n);console.log(`%c${t}: ${this.formatValue(t,e.value)} (${n})`,`color: ${i}; font-weight: bold;`),this.sendToAnalytics(t,e)}getRating(t,e){const n=this.thresholds[t];return n?e<=n.good?"good":e<=n.needsImprovement?"needs-improvement":"poor":"unknown"}getRatingColor(t){switch(t){case"good":return"#0cce6b";case"needs-improvement":return"#ffa400";case"poor":return"#ff4e42";default:return"#888888"}}formatValue(t,e){return t==="CLS"?e.toFixed(3):`${Math.round(e)}ms`}monitorResourceTiming(){if(!window.performance||!window.performance.getEntriesByType)return;const t=new PerformanceObserver(e=>{for(const n of e.getEntries())n.duration>1e3&&console.warn(`‚ö†Ô∏è Slow resource: ${n.name} (${Math.round(n.duration)}ms)`)});try{t.observe({entryTypes:["resource"]}),this.observers.push(t)}catch(e){console.warn("Resource timing monitoring not supported:",e)}}monitorNavigationTiming(){!window.performance||!window.performance.getEntriesByType||window.addEventListener("load",()=>{const t=performance.getEntriesByType("navigation")[0];t&&(console.group("üìä Navigation Timing"),console.log(`DNS Lookup: ${Math.round(t.domainLookupEnd-t.domainLookupStart)}ms`),console.log(`TCP Connection: ${Math.round(t.connectEnd-t.connectStart)}ms`),console.log(`Request: ${Math.round(t.responseStart-t.requestStart)}ms`),console.log(`Response: ${Math.round(t.responseEnd-t.responseStart)}ms`),console.log(`DOM Processing: ${Math.round(t.domComplete-t.domLoading)}ms`),console.log(`Load Complete: ${Math.round(t.loadEventEnd-t.loadEventStart)}ms`),console.groupEnd())})}sendToAnalytics(t,e){typeof gtag<"u"&&gtag("event",t,{event_category:"Web Vitals",value:Math.round(e.value),metric_id:e.id,metric_value:e.value,metric_delta:e.delta,metric_rating:this.getRating(t,e.value)})}getMetrics(){return{...this.metrics}}getSummary(){const t={};for(const[e,n]of Object.entries(this.metrics))n!==null&&(t[e]={value:n,rating:this.getRating(e,n),formatted:this.formatValue(e,n)});return t}destroy(){this.observers.forEach(t=>t.disconnect()),this.observers=[],this.initialized=!1}}let o=null;function b(){return o||(o=new y),o}class f{constructor(){this.observer=null,this.observedElements=new WeakSet}initObserver(){this.observer||(this.observer=new IntersectionObserver(t=>{t.forEach(e=>{if(e.isIntersecting){const n=e.target.dataset.bgImage;if(n){const i=new Image;i.loading="lazy",i.decoding="async",i.onload=()=>{requestAnimationFrame(()=>{e.target.style.backgroundImage=`url(${n})`,e.target.style.backgroundSize="cover",e.target.style.backgroundPosition="center",e.target.style.opacity="1"})},i.onerror=()=>{console.warn(`Failed to load background image: ${n}`)},i.src=n,delete e.target.dataset.bgImage}this.observer.unobserve(e.target)}})},{rootMargin:"150px",threshold:.01}))}loadBackgroundImage(t,e,n=!1){if(!(!t||!e)){if(n){const i=new Image;i.loading="eager",i.fetchPriority="high",i.decoding="async",i.onload=()=>{requestAnimationFrame(()=>{t.style.backgroundImage=`url(${e})`,t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.style.opacity="1"})},i.onerror=()=>{console.warn(`Failed to load background image: ${e}`)},i.src=e;return}this.initObserver(),t.dataset.bgImage=e,this.observedElements.has(t)||(this.observer.observe(t),this.observedElements.add(t))}}unobserve(t){this.observer&&t&&(this.observer.unobserve(t),this.observedElements.delete(t))}disconnect(){this.observer&&(this.observer.disconnect(),this.observer=null),this.observedElements=new WeakSet}}const E=new f;export{p as L,E as b,b as g};
